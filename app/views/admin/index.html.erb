<div class="w-full">

  <div class="flex justify-between items-center">
    <h1 class="font-bold text-4xl text-primary mt-1 mb-4">
      <i class="fa-solid fa-triangle-exclamation"></i>
      Demandes
    </h1>
  </div>

  <%= form_tag admin_index_path, method: :get do %>
    <div class="flex flex-wrap xl:flex-nowrap">

      <div class="mr-4">
        <%= label_tag :demande, "Demande", class: "label" %>
        <%= select_tag :demande, 
                        options_for_select(@demandes.type_documents, params[:demande]), 
                        include_blank: true,
                        class: 'select select-sm select-bordered w-full max-w-xs', 
                        onchange: 'this.form.submit()' %>
      </div>

      <div class="mr-4">
        <%= label_tag :du, "Du", class: "label" %>
        <%= text_field_tag :du,
                            params[:du],
                            type: "date",
                            class: 'input input-sm input-bordered w-full max-w-xs', 
                            onchange: 'this.form.submit()' %>
      </div>

      <div class="mr-4">
        <%= label_tag :au, "Au", class: "label" %>
        <%= text_field_tag :au,
                            params[:au],
                            type: "date",
                            class: 'input input-sm input-bordered w-full max-w-xs', 
                            onchange: 'this.form.submit()' %>
      </div>

      <div class="mr-4">
        <%= label_tag :train, "Train(s)", class: "label" %>
        <%= text_field_tag :train,
                        params[:train],
                        include_blank: true,
                        class: 'input input-sm select-bordered w-full max-w-xs',
                        onchange: 'this.form.submit()' %>
      </div>

    </div>
  <% end %>

  <div id="disturbances" class="my-4 overflow-x-auto">
    <table class="table table-zebra w-full">
      <thead>
        <tr>
          <th>Nom</th>
          <th>Prénom</th>
          <th>Date de naissance</th>
          <th>Lieu de naissance</th>
          <th>District</th>
          <th>État</th>
          <th>Demandeur</th>
        </tr>
      </thead>
      <tbody>
        <% @demandes.each do | demande | %>
          <tr class="hover">
            <th class="font-normal">
              <p>
                <%= demande.nom %>
              </p>
            </th>

            <td>
              <p>
                <%= demande.prénom %>
              </p>
            </td>
            
            <td>
              <p>
                <%= demande.date_naissance %>
              </p>
            </td>

            <td>
              <p>
                <%= demande.lieu_naissance %>
              </p>
            </td>

            <td>
              <p>
                <%= demande.district %>
              </p>
            </td>

            <td>
              <p>
                <%= demande.workflow_state %>
              </p>
            </td>

            <td>
              <p>
                <%= demande.user.email %>
              </p>
            </td>
          </tr>
        <% end %>
      </tbody>
      <tfoot>
        <th colspan=9></th>
      </tfoot>
    </table>
  </div>

<%= page_entries_info @demandes, entry_name: 'demande' %>
<%= paginate @demandes %>
